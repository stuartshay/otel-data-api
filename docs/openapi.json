{
  "openapi": "3.1.0",
  "info": {
    "title": "OTel Data API",
    "description": "REST API for OwnTracks/Garmin GPS data with PostGIS spatial queries",
    "version": "1.0.0"
  },
  "paths": {
    "/health": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Health",
        "description": "Liveness probe \u2014 returns healthy if the service is running.",
        "operationId": "health_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Health Health Get"
                }
              }
            }
          }
        }
      }
    },
    "/ready": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Ready",
        "description": "Readiness probe \u2014 returns ready if the database is reachable.",
        "operationId": "ready_ready_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/locations": {
      "get": {
        "tags": [
          "Locations"
        ],
        "summary": "List Locations",
        "description": "List OwnTracks locations with filtering and pagination.\n\nReturns paginated GPS location data recorded by OwnTracks mobile app.\nFilter by device ID and date range. Includes battery, accuracy, and connection metadata.",
        "operationId": "list_locations_api_v1_locations_get",
        "parameters": [
          {
            "name": "device_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by device ID",
              "examples": [
                "iphone_stuart"
              ],
              "title": "Device Id"
            },
            "description": "Filter by device ID"
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter from date (YYYY-MM-DD)",
              "examples": [
                "2026-02-01"
              ],
              "title": "Date From"
            },
            "description": "Filter from date (YYYY-MM-DD)"
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter to date (YYYY-MM-DD)",
              "examples": [
                "2026-02-12"
              ],
              "title": "Date To"
            },
            "description": "Filter to date (YYYY-MM-DD)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "sort",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Sort column (id, device_id, timestamp, created_at, battery, accuracy)",
              "default": "created_at",
              "title": "Sort"
            },
            "description": "Sort column (id, device_id, timestamp, created_at, battery, accuracy)"
          },
          {
            "name": "order",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string",
              "default": "desc",
              "title": "Order"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_Location_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/locations/devices": {
      "get": {
        "tags": [
          "Locations"
        ],
        "summary": "List Devices",
        "description": "List all distinct device IDs.",
        "operationId": "list_devices_api_v1_locations_devices_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/DeviceInfo"
                  },
                  "type": "array",
                  "title": "Response List Devices Api V1 Locations Devices Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/locations/count": {
      "get": {
        "tags": [
          "Locations"
        ],
        "summary": "Location Count",
        "description": "Get total location count with optional filters.",
        "operationId": "location_count_api_v1_locations_count_get",
        "parameters": [
          {
            "name": "date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by date (YYYY-MM-DD)",
              "examples": [
                "2026-02-12"
              ],
              "title": "Date"
            },
            "description": "Filter by date (YYYY-MM-DD)"
          },
          {
            "name": "device_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by device ID",
              "examples": [
                "iphone_stuart"
              ],
              "title": "Device Id"
            },
            "description": "Filter by device ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LocationCount"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/locations/{location_id}": {
      "get": {
        "tags": [
          "Locations"
        ],
        "summary": "Get Location",
        "description": "Get a single location by ID, including raw payload.",
        "operationId": "get_location_api_v1_locations__location_id__get",
        "parameters": [
          {
            "name": "location_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Location Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LocationDetail"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/garmin/activities": {
      "get": {
        "tags": [
          "Garmin"
        ],
        "summary": "List Activities",
        "description": "List Garmin activities with filtering and pagination.\n\nReturns paginated Garmin cycling/running activities with track point counts.\nFilter by sport type or date range. Sort by start time, distance, duration, etc.",
        "operationId": "list_activities_api_v1_garmin_activities_get",
        "parameters": [
          {
            "name": "sport",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by sport type",
              "examples": [
                "cycling"
              ],
              "title": "Sport"
            },
            "description": "Filter by sport type"
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter from date (YYYY-MM-DD)",
              "examples": [
                "2025-11-01"
              ],
              "title": "Date From"
            },
            "description": "Filter from date (YYYY-MM-DD)"
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter to date (YYYY-MM-DD)",
              "examples": [
                "2025-11-30"
              ],
              "title": "Date To"
            },
            "description": "Filter to date (YYYY-MM-DD)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "sort",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Sort column (start_time, distance_km, duration_seconds, sport, created_at)",
              "default": "start_time",
              "title": "Sort"
            },
            "description": "Sort column (start_time, distance_km, duration_seconds, sport, created_at)"
          },
          {
            "name": "order",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string",
              "default": "desc",
              "title": "Order"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_GarminActivity_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/garmin/sports": {
      "get": {
        "tags": [
          "Garmin"
        ],
        "summary": "List Sports",
        "description": "List distinct sport types with activity counts.",
        "operationId": "list_sports_api_v1_garmin_sports_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/SportInfo"
                  },
                  "type": "array",
                  "title": "Response List Sports Api V1 Garmin Sports Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/garmin/activities/{activity_id}": {
      "get": {
        "tags": [
          "Garmin"
        ],
        "summary": "Get Activity",
        "description": "Get a single Garmin activity by ID with track point count.",
        "operationId": "get_activity_api_v1_garmin_activities__activity_id__get",
        "parameters": [
          {
            "name": "activity_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Garmin activity ID",
              "examples": [
                "20932993811"
              ],
              "title": "Activity Id"
            },
            "description": "Garmin activity ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GarminActivity"
                }
              }
            }
          },
          "404": {
            "description": "Activity not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/garmin/activities/{activity_id}/tracks": {
      "get": {
        "tags": [
          "Garmin"
        ],
        "summary": "List Track Points",
        "description": "List track points for a specific activity.\n\nReturns GPS track points with altitude, speed, heart rate, and cadence data.\nSupports up to 10,000 points per request for full activity visualization.",
        "operationId": "list_track_points_api_v1_garmin_activities__activity_id__tracks_get",
        "parameters": [
          {
            "name": "activity_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Garmin activity ID",
              "examples": [
                "20932993811"
              ],
              "title": "Activity Id"
            },
            "description": "Garmin activity ID"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 10000,
              "minimum": 1,
              "default": 500,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "sort",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Sort column (timestamp, altitude, speed_kmh, heart_rate, created_at)",
              "default": "timestamp",
              "title": "Sort"
            },
            "description": "Sort column (timestamp, altitude, speed_kmh, heart_rate, created_at)"
          },
          {
            "name": "order",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string",
              "default": "asc",
              "title": "Order"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_GarminTrackPoint_"
                }
              }
            }
          },
          "404": {
            "description": "Activity not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/gps/unified": {
      "get": {
        "tags": [
          "Unified GPS"
        ],
        "summary": "List Unified Gps",
        "description": "Query the unified_gps_points view combining OwnTracks + Garmin data.\n\nMerges OwnTracks location data and Garmin track points into a single\nchronological stream. Filter by data source or date range.",
        "operationId": "list_unified_gps_api_v1_gps_unified_get",
        "parameters": [
          {
            "name": "source",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by source: owntracks or garmin",
              "examples": [
                "owntracks"
              ],
              "title": "Source"
            },
            "description": "Filter by source: owntracks or garmin"
          },
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter from date (YYYY-MM-DD)",
              "examples": [
                "2026-02-01"
              ],
              "title": "Date From"
            },
            "description": "Filter from date (YYYY-MM-DD)"
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter to date (YYYY-MM-DD)",
              "examples": [
                "2026-02-12"
              ],
              "title": "Date To"
            },
            "description": "Filter to date (YYYY-MM-DD)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 5000,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "order",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string",
              "default": "desc",
              "title": "Order"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_UnifiedGpsPoint_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/gps/daily-summary": {
      "get": {
        "tags": [
          "Unified GPS"
        ],
        "summary": "Daily Summary",
        "description": "Query the daily_activity_summary view for aggregated daily stats.\n\nReturns per-day aggregates including OwnTracks point counts, battery stats,\nand Garmin activity metrics (distance, duration, heart rate, calories).",
        "operationId": "daily_summary_api_v1_gps_daily_summary_get",
        "parameters": [
          {
            "name": "date_from",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter from date (YYYY-MM-DD)",
              "examples": [
                "2026-02-01"
              ],
              "title": "Date From"
            },
            "description": "Filter from date (YYYY-MM-DD)"
          },
          {
            "name": "date_to",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter to date (YYYY-MM-DD)",
              "examples": [
                "2026-02-12"
              ],
              "title": "Date To"
            },
            "description": "Filter to date (YYYY-MM-DD)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 365,
              "minimum": 1,
              "default": 30,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DailyActivitySummary"
                  },
                  "title": "Response Daily Summary Api V1 Gps Daily Summary Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/reference-locations": {
      "get": {
        "tags": [
          "Reference Locations"
        ],
        "summary": "List Reference Locations",
        "description": "List all reference locations.",
        "operationId": "list_reference_locations_api_v1_reference_locations_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/ReferenceLocation"
                  },
                  "type": "array",
                  "title": "Response List Reference Locations Api V1 Reference Locations Get"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Reference Locations"
        ],
        "summary": "Create Reference Location",
        "description": "Create a new reference location (auth required).",
        "operationId": "create_reference_location_api_v1_reference_locations_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReferenceLocationCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReferenceLocation"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/reference-locations/{location_id}": {
      "get": {
        "tags": [
          "Reference Locations"
        ],
        "summary": "Get Reference Location",
        "description": "Get a single reference location by ID.",
        "operationId": "get_reference_location_api_v1_reference_locations__location_id__get",
        "parameters": [
          {
            "name": "location_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Location Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReferenceLocation"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Reference Locations"
        ],
        "summary": "Update Reference Location",
        "description": "Update a reference location (auth required).",
        "operationId": "update_reference_location_api_v1_reference_locations__location_id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "location_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Location Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReferenceLocationUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReferenceLocation"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Reference Locations"
        ],
        "summary": "Delete Reference Location",
        "description": "Delete a reference location (auth required).",
        "operationId": "delete_reference_location_api_v1_reference_locations__location_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "location_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Location Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/spatial/nearby": {
      "get": {
        "tags": [
          "Spatial"
        ],
        "summary": "Find Nearby",
        "description": "Find GPS points within a radius of a given lat/lon using PostGIS ST_DWithin.\n\nSearches both OwnTracks locations and Garmin track points within the\nspecified radius. Results are sorted by distance from the center point.",
        "operationId": "find_nearby_api_v1_spatial_nearby_get",
        "parameters": [
          {
            "name": "lat",
            "in": "query",
            "required": true,
            "schema": {
              "type": "number",
              "description": "Latitude of center point",
              "examples": [
                40.7362
              ],
              "title": "Lat"
            },
            "description": "Latitude of center point"
          },
          {
            "name": "lon",
            "in": "query",
            "required": true,
            "schema": {
              "type": "number",
              "description": "Longitude of center point",
              "examples": [
                -74.0394
              ],
              "title": "Lon"
            },
            "description": "Longitude of center point"
          },
          {
            "name": "radius_meters",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100000,
              "minimum": 1,
              "description": "Search radius in meters",
              "default": 1000,
              "title": "Radius Meters"
            },
            "description": "Search radius in meters"
          },
          {
            "name": "source",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by source: owntracks or garmin",
              "examples": [
                "owntracks"
              ],
              "title": "Source"
            },
            "description": "Filter by source: owntracks or garmin"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 5000,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/NearbyPoint"
                  },
                  "title": "Response Find Nearby Api V1 Spatial Nearby Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/spatial/distance": {
      "get": {
        "tags": [
          "Spatial"
        ],
        "summary": "Calculate Distance",
        "description": "Calculate the distance in meters between two points using PostGIS ST_Distance.\n\nUses geodesic (geography) distance for accurate results on the Earth's surface.",
        "operationId": "calculate_distance_api_v1_spatial_distance_get",
        "parameters": [
          {
            "name": "from_lat",
            "in": "query",
            "required": true,
            "schema": {
              "type": "number",
              "description": "From latitude (e.g. NYC)",
              "examples": [
                40.7128
              ],
              "title": "From Lat"
            },
            "description": "From latitude (e.g. NYC)"
          },
          {
            "name": "from_lon",
            "in": "query",
            "required": true,
            "schema": {
              "type": "number",
              "description": "From longitude (e.g. NYC)",
              "examples": [
                -74.006
              ],
              "title": "From Lon"
            },
            "description": "From longitude (e.g. NYC)"
          },
          {
            "name": "to_lat",
            "in": "query",
            "required": true,
            "schema": {
              "type": "number",
              "description": "To latitude (e.g. Times Square)",
              "examples": [
                40.758
              ],
              "title": "To Lat"
            },
            "description": "To latitude (e.g. Times Square)"
          },
          {
            "name": "to_lon",
            "in": "query",
            "required": true,
            "schema": {
              "type": "number",
              "description": "To longitude (e.g. Times Square)",
              "examples": [
                -73.9855
              ],
              "title": "To Lon"
            },
            "description": "To longitude (e.g. Times Square)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DistanceResult"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/spatial/within-reference/{name}": {
      "get": {
        "tags": [
          "Spatial"
        ],
        "summary": "Within Reference",
        "description": "Find all GPS points within a named reference location's radius.\n\nLooks up a named reference location (e.g. 'home') and finds all GPS points\nfrom OwnTracks and/or Garmin data within its configured radius.",
        "operationId": "within_reference_api_v1_spatial_within_reference__name__get",
        "parameters": [
          {
            "name": "name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Reference location name",
              "examples": [
                "home"
              ],
              "title": "Name"
            },
            "description": "Reference location name"
          },
          {
            "name": "source",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by source: owntracks or garmin",
              "examples": [
                "owntracks"
              ],
              "title": "Source"
            },
            "description": "Filter by source: owntracks or garmin"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 5000,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WithinReferenceResult"
                }
              }
            }
          },
          "404": {
            "description": "Reference location not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "DailyActivitySummary": {
        "properties": {
          "activity_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Activity Date"
          },
          "owntracks_device": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Owntracks Device"
          },
          "owntracks_points": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Owntracks Points"
          },
          "min_battery": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Battery"
          },
          "max_battery": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Battery"
          },
          "avg_accuracy": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Accuracy"
          },
          "garmin_sport": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Garmin Sport"
          },
          "garmin_activities": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Garmin Activities"
          },
          "total_distance_km": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Distance Km"
          },
          "total_duration_seconds": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Duration Seconds"
          },
          "avg_heart_rate": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Heart Rate"
          },
          "total_calories": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Calories"
          }
        },
        "type": "object",
        "title": "DailyActivitySummary",
        "examples": [
          {
            "activity_date": "2026-02-11",
            "avg_accuracy": 4.89,
            "avg_heart_rate": 142.0,
            "garmin_activities": 1,
            "garmin_sport": "cycling",
            "max_battery": 100,
            "min_battery": 64,
            "owntracks_device": "iphone_stuart",
            "owntracks_points": 1429,
            "total_calories": 1689,
            "total_distance_km": 50.6,
            "total_duration_seconds": 6932
          }
        ]
      },
      "DeviceInfo": {
        "properties": {
          "device_id": {
            "type": "string",
            "title": "Device Id"
          }
        },
        "type": "object",
        "required": [
          "device_id"
        ],
        "title": "DeviceInfo",
        "examples": [
          {
            "device_id": "iphone_stuart"
          }
        ]
      },
      "DistanceResult": {
        "properties": {
          "distance_meters": {
            "type": "number",
            "title": "Distance Meters"
          },
          "from_lat": {
            "type": "number",
            "title": "From Lat"
          },
          "from_lon": {
            "type": "number",
            "title": "From Lon"
          },
          "to_lat": {
            "type": "number",
            "title": "To Lat"
          },
          "to_lon": {
            "type": "number",
            "title": "To Lon"
          }
        },
        "type": "object",
        "required": [
          "distance_meters",
          "from_lat",
          "from_lon",
          "to_lat",
          "to_lon"
        ],
        "title": "DistanceResult",
        "examples": [
          {
            "distance_meters": 5309.71,
            "from_lat": 40.7128,
            "from_lon": -74.006,
            "to_lat": 40.758,
            "to_lon": -73.9855
          }
        ]
      },
      "GarminActivity": {
        "properties": {
          "activity_id": {
            "type": "string",
            "title": "Activity Id"
          },
          "sport": {
            "type": "string",
            "title": "Sport"
          },
          "sub_sport": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sub Sport"
          },
          "start_time": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Start Time"
          },
          "end_time": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "End Time"
          },
          "distance_km": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Distance Km"
          },
          "duration_seconds": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration Seconds"
          },
          "avg_heart_rate": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Heart Rate"
          },
          "max_heart_rate": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Heart Rate"
          },
          "avg_cadence": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Cadence"
          },
          "max_cadence": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Cadence"
          },
          "calories": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Calories"
          },
          "avg_speed_kmh": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Speed Kmh"
          },
          "max_speed_kmh": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Speed Kmh"
          },
          "total_ascent_m": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Ascent M"
          },
          "total_descent_m": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Descent M"
          },
          "total_distance": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Distance"
          },
          "avg_pace": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Pace"
          },
          "device_manufacturer": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Device Manufacturer"
          },
          "avg_temperature_c": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avg Temperature C"
          },
          "min_temperature_c": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Temperature C"
          },
          "max_temperature_c": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Temperature C"
          },
          "total_elapsed_time": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Elapsed Time"
          },
          "total_timer_time": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Timer Time"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "uploaded_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uploaded At"
          },
          "track_point_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Track Point Count"
          }
        },
        "type": "object",
        "required": [
          "activity_id",
          "sport"
        ],
        "title": "GarminActivity",
        "examples": [
          {
            "activity_id": "20932993811",
            "avg_cadence": 78,
            "avg_heart_rate": 142,
            "avg_pace": 3.513345,
            "avg_speed_kmh": 26.3,
            "avg_temperature_c": 18,
            "calories": 1689,
            "created_at": "2026-02-09T23:56:37Z",
            "device_manufacturer": "garmin",
            "distance_km": 50.6,
            "duration_seconds": 6932,
            "end_time": "2025-11-08T20:16:45Z",
            "max_cadence": 112,
            "max_heart_rate": 178,
            "max_speed_kmh": 48.7,
            "max_temperature_c": 22,
            "min_temperature_c": 14,
            "sport": "cycling",
            "start_time": "2025-11-08T18:21:13Z",
            "sub_sport": "road",
            "total_ascent_m": 385,
            "total_descent_m": 380,
            "total_distance": 50598.95,
            "total_elapsed_time": 7200.5,
            "total_timer_time": 6932.1,
            "track_point_count": 10707,
            "uploaded_at": "2026-02-09T23:56:37Z"
          }
        ]
      },
      "GarminTrackPoint": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "activity_id": {
            "type": "string",
            "title": "Activity Id"
          },
          "latitude": {
            "type": "number",
            "title": "Latitude"
          },
          "longitude": {
            "type": "number",
            "title": "Longitude"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          },
          "altitude": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Altitude"
          },
          "distance_from_start_km": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Distance From Start Km"
          },
          "speed_kmh": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Speed Kmh"
          },
          "heart_rate": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Heart Rate"
          },
          "cadence": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cadence"
          },
          "temperature_c": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Temperature C"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "activity_id",
          "latitude",
          "longitude",
          "timestamp"
        ],
        "title": "GarminTrackPoint",
        "examples": [
          {
            "activity_id": "20932993811",
            "altitude": 12.4,
            "cadence": 80,
            "created_at": "2026-02-09T23:56:37Z",
            "distance_from_start_km": 0.0,
            "heart_rate": 135,
            "id": 7454,
            "latitude": 40.71501586586237,
            "longitude": -74.01768794283271,
            "speed_kmh": 24.5,
            "temperature_c": 18,
            "timestamp": "2025-11-08T18:21:13Z"
          }
        ]
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "Location": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "device_id": {
            "type": "string",
            "title": "Device Id"
          },
          "tid": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tid"
          },
          "latitude": {
            "type": "number",
            "title": "Latitude"
          },
          "longitude": {
            "type": "number",
            "title": "Longitude"
          },
          "accuracy": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Accuracy"
          },
          "altitude": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Altitude"
          },
          "velocity": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Velocity"
          },
          "battery": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Battery"
          },
          "battery_status": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Battery Status"
          },
          "connection_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Connection Type"
          },
          "trigger": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trigger"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "device_id",
          "latitude",
          "longitude",
          "timestamp"
        ],
        "title": "Location",
        "examples": [
          {
            "accuracy": 7,
            "altitude": 4,
            "battery": 100,
            "battery_status": 2,
            "connection_type": "w",
            "created_at": "2026-02-12T08:10:55Z",
            "device_id": "iphone_stuart",
            "id": 101160,
            "latitude": 40.736238,
            "longitude": -74.039405,
            "tid": "ss",
            "timestamp": "2026-02-12T08:10:55Z",
            "trigger": "t"
          }
        ]
      },
      "LocationCount": {
        "properties": {
          "count": {
            "type": "integer",
            "title": "Count"
          },
          "date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Date"
          },
          "device_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Device Id"
          }
        },
        "type": "object",
        "required": [
          "count"
        ],
        "title": "LocationCount",
        "examples": [
          {
            "count": 45883,
            "device_id": "iphone_stuart"
          }
        ]
      },
      "LocationDetail": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "device_id": {
            "type": "string",
            "title": "Device Id"
          },
          "tid": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tid"
          },
          "latitude": {
            "type": "number",
            "title": "Latitude"
          },
          "longitude": {
            "type": "number",
            "title": "Longitude"
          },
          "accuracy": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Accuracy"
          },
          "altitude": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Altitude"
          },
          "velocity": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Velocity"
          },
          "battery": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Battery"
          },
          "battery_status": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Battery Status"
          },
          "connection_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Connection Type"
          },
          "trigger": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trigger"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "raw_payload": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Raw Payload"
          }
        },
        "type": "object",
        "required": [
          "id",
          "device_id",
          "latitude",
          "longitude",
          "timestamp"
        ],
        "title": "LocationDetail",
        "examples": [
          {
            "accuracy": 7,
            "altitude": 4,
            "battery": 100,
            "battery_status": 2,
            "connection_type": "w",
            "created_at": "2026-02-12T08:10:55Z",
            "device_id": "iphone_stuart",
            "id": 101160,
            "latitude": 40.736238,
            "longitude": -74.039405,
            "raw_payload": {
              "_type": "location",
              "acc": 7,
              "batt": 100,
              "lat": 40.736238,
              "lon": -74.039405,
              "tid": "ss"
            },
            "tid": "ss",
            "timestamp": "2026-02-12T08:10:55Z",
            "trigger": "t"
          }
        ]
      },
      "NearbyPoint": {
        "properties": {
          "source": {
            "type": "string",
            "title": "Source"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "latitude": {
            "type": "number",
            "title": "Latitude"
          },
          "longitude": {
            "type": "number",
            "title": "Longitude"
          },
          "distance_meters": {
            "type": "number",
            "title": "Distance Meters"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "source",
          "id",
          "latitude",
          "longitude",
          "distance_meters",
          "timestamp"
        ],
        "title": "NearbyPoint",
        "examples": [
          {
            "distance_meters": 0.4,
            "id": 35144,
            "latitude": 40.736202,
            "longitude": -74.039404,
            "source": "owntracks",
            "timestamp": "2026-02-02T10:30:53Z"
          }
        ]
      },
      "PaginatedResponse_GarminActivity_": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/GarminActivity"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "PaginatedResponse[GarminActivity]"
      },
      "PaginatedResponse_GarminTrackPoint_": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/GarminTrackPoint"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "PaginatedResponse[GarminTrackPoint]"
      },
      "PaginatedResponse_Location_": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/Location"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "PaginatedResponse[Location]"
      },
      "PaginatedResponse_UnifiedGpsPoint_": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/UnifiedGpsPoint"
            },
            "type": "array",
            "title": "Items"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          }
        },
        "type": "object",
        "required": [
          "items",
          "total",
          "limit",
          "offset"
        ],
        "title": "PaginatedResponse[UnifiedGpsPoint]"
      },
      "ReferenceLocation": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "latitude": {
            "type": "number",
            "title": "Latitude"
          },
          "longitude": {
            "type": "number",
            "title": "Longitude"
          },
          "radius_meters": {
            "type": "integer",
            "title": "Radius Meters",
            "default": 50
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "name",
          "latitude",
          "longitude"
        ],
        "title": "ReferenceLocation",
        "examples": [
          {
            "created_at": "2026-02-03T22:49:07Z",
            "description": "Primary apartment - 40m radius",
            "id": 1,
            "latitude": 40.7362,
            "longitude": -74.0394,
            "name": "home",
            "radius_meters": 40,
            "updated_at": "2026-02-03T22:50:01Z"
          }
        ]
      },
      "ReferenceLocationCreate": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "latitude": {
            "type": "number",
            "title": "Latitude"
          },
          "longitude": {
            "type": "number",
            "title": "Longitude"
          },
          "radius_meters": {
            "type": "integer",
            "title": "Radius Meters",
            "default": 50
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          }
        },
        "type": "object",
        "required": [
          "name",
          "latitude",
          "longitude"
        ],
        "title": "ReferenceLocationCreate",
        "examples": [
          {
            "description": "Downtown office building",
            "latitude": 40.7128,
            "longitude": -74.006,
            "name": "office",
            "radius_meters": 100
          }
        ]
      },
      "ReferenceLocationUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "latitude": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latitude"
          },
          "longitude": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Longitude"
          },
          "radius_meters": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Radius Meters"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          }
        },
        "type": "object",
        "title": "ReferenceLocationUpdate",
        "examples": [
          {
            "description": "Updated radius for office building",
            "radius_meters": 75
          }
        ]
      },
      "SportInfo": {
        "properties": {
          "sport": {
            "type": "string",
            "title": "Sport"
          },
          "activity_count": {
            "type": "integer",
            "title": "Activity Count"
          }
        },
        "type": "object",
        "required": [
          "sport",
          "activity_count"
        ],
        "title": "SportInfo",
        "examples": [
          {
            "activity_count": 20,
            "sport": "cycling"
          }
        ]
      },
      "UnifiedGpsPoint": {
        "properties": {
          "source": {
            "type": "string",
            "title": "Source"
          },
          "identifier": {
            "type": "string",
            "title": "Identifier"
          },
          "latitude": {
            "type": "number",
            "title": "Latitude"
          },
          "longitude": {
            "type": "number",
            "title": "Longitude"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          },
          "accuracy": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Accuracy"
          },
          "battery": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Battery"
          },
          "speed_kmh": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Speed Kmh"
          },
          "heart_rate": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Heart Rate"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "source",
          "identifier",
          "latitude",
          "longitude",
          "timestamp"
        ],
        "title": "UnifiedGpsPoint",
        "examples": [
          {
            "accuracy": 7,
            "battery": 100,
            "created_at": "2026-02-12T08:11:55Z",
            "identifier": "iphone_stuart",
            "latitude": 40.736238,
            "longitude": -74.039405,
            "source": "owntracks",
            "timestamp": "2026-02-12T08:11:55Z"
          }
        ]
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "WithinReferenceResult": {
        "properties": {
          "reference_name": {
            "type": "string",
            "title": "Reference Name"
          },
          "radius_meters": {
            "type": "integer",
            "title": "Radius Meters"
          },
          "total_points": {
            "type": "integer",
            "title": "Total Points"
          },
          "points": {
            "items": {
              "$ref": "#/components/schemas/NearbyPoint"
            },
            "type": "array",
            "title": "Points"
          }
        },
        "type": "object",
        "required": [
          "reference_name",
          "radius_meters",
          "total_points",
          "points"
        ],
        "title": "WithinReferenceResult",
        "examples": [
          {
            "points": [
              {
                "distance_meters": 0.4,
                "id": 35144,
                "latitude": 40.736202,
                "longitude": -74.039404,
                "source": "owntracks",
                "timestamp": "2026-02-02T10:30:53Z"
              }
            ],
            "radius_meters": 40,
            "reference_name": "home",
            "total_points": 2
          }
        ]
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  }
}
